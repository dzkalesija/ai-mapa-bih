<!DOCTYPE html>
<html lang="bs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nacionalno istra쬴vanje o primjeni AI u BiH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: white; font-family: 'Inter', sans-serif; }
        .step { display: none; }
        .step.active { display: block; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .selected { border-color: #3b82f6 !important; background-color: rgba(59, 130, 246, 0.1); }
    </style>
</head>
<body class="p-4 md:p-10 flex flex-col min-h-screen">

    <div class="max-w-3xl mx-auto bg-slate-800/40 p-8 rounded-3xl border border-slate-700 shadow-xl flex-grow">
        <div class="mb-8 border-b border-slate-700 pb-4">
            <h1 class="text-xl font-bold text-blue-400 uppercase tracking-tight">Akademsko istra쬴vanje</h1>
            <p class="text-slate-400 text-sm italic text-balance">Status i potencijal primjene vje코ta캜ke inteligencije u Bosni i Hercegovini</p>
        </div>

        <form id="aiSurvey">
            <div class="step active" id="step1">
                <h2 class="text-2xl font-bold mb-6">1. Demografska lokacija</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Entitet / Distrikt</label>
                        <select id="entitet" onchange="azurirajOpcine()" class="w-full p-4 rounded-xl bg-slate-900 border border-slate-700 outline-none focus:ring-2 ring-blue-500 text-white">
                            <option value="">Odaberite...</option>
                            <option value="FBiH">Federacija BiH</option>
                            <option value="RS">Republika Srpska</option>
                            <option value="BD">Br캜ko Distrikt</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Op캖ina / Grad</label>
                        <select id="opcina" class="w-full p-4 rounded-xl bg-slate-900 border border-slate-700 outline-none focus:ring-2 ring-blue-500 text-white">
                            <option value="">Prvo odaberite entitet...</option>
                        </select>
                    </div>
                </div>
                
                <div class="mt-6">
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Primarni profesionalni profil</label>
                    <select id="struka" onchange="pokaziPut()" class="w-full p-4 rounded-xl bg-slate-900 border border-slate-700 outline-none focus:ring-2 ring-blue-500">
                        <option value="">Odaberite profil...</option>
                        <option value="ucenik_os">U캜enik (Osnovna 코kola)</option>
                        <option value="ucenik_ss">U캜enik (Srednja 코kola)</option>
                        <option value="student">Student</option>
                        <option value="proizvodnja">Industrija / Tehnika / Proizvodnja</option>
                        <option value="biznis">Menad쬸ent / Preduzetni코tvo</option>
                        <option value="it_sektor">IT Sektor / Digitalni kreativci</option>
                        <option value="ostalo">Ostalo / Nezaposlen</option>
                    </select>
                </div>
                <button type="button" onclick="nextStep(2)" class="w-full mt-8 bg-blue-600 p-4 rounded-xl font-bold uppercase tracking-widest hover:bg-blue-500 transition-all">Nastavi</button>
            </div>

            <div class="step" id="step2">
                <div id="dinamicki_sadrzaj"></div>
                <button type="button" onclick="nextStep(3)" class="w-full mt-8 bg-blue-600 p-4 rounded-xl font-bold uppercase tracking-widest">Dalje</button>
            </div>

            <div class="step" id="step3">
                <h2 class="text-2xl font-bold mb-6 italic text-center text-blue-400 uppercase">Tehnolo코ki arsenal</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-3 mb-8" id="alati_grid"></div>
                
                <div class="space-y-6">
                    <label class="block text-xs font-bold text-slate-500 uppercase text-center italic">Procjena sedmi캜ne u코tede vremena (h)</label>
                    <input type="range" id="usteda" min="0" max="40" value="5" class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer">
                    <div class="text-center font-bold text-blue-400 mt-2"><span id="usteda_val">5</span> sati</div>

                    <label class="flex items-center space-x-3 p-4 bg-slate-900 border border-slate-700 rounded-xl cursor-pointer">
                        <input type="checkbox" id="pretplata" class="w-5 h-5">
                        <span class="text-sm font-medium">Koristim napredne pretpla캖ene servise (Pro/Premium)</span>
                    </label>
                </div>

                <button type="button" onclick="submitData()" class="w-full mt-8 bg-emerald-600 hover:bg-emerald-500 p-4 rounded-xl font-bold uppercase tracking-widest transition-all">Po코alji podatke</button>
            </div>

            <div class="step text-center" id="step4">
                <div class="text-5xl mb-6">游늳</div>
                <h1 class="text-3xl font-bold mb-2 uppercase">Indeks adaptacije</h1>
                <div class="text-7xl font-black text-blue-500 mb-8" id="iq_score">0</div>
                <div class="p-6 bg-slate-900 rounded-2xl border border-slate-700">
                    <p id="hvala_msg" class="text-sm font-medium text-slate-300"></p>
                </div>
                <button type="button" onclick="location.reload()" class="mt-8 text-slate-500 text-xs hover:underline">Novi unos</button>
            </div>
        </form>
    </div>

    <footer class="mt-8 text-center text-[10px] text-slate-600 uppercase tracking-[0.3em] space-y-1">
        <p>Autor istra쬴vanja: <span class="text-slate-400 underline">VAE IME I PREZIME</span></p>
        <p>In쬰njerska podr코ka: <span class="text-slate-400">Gemini AI</span></p>
    </footer>

    <script>
        const podaci = {
            "FBiH": ["Banovi캖i", "Biha캖", "Bosanska Krupa", "Bosanski Petrovac", "Bosansko Grahovo", "Breza", "Bugojno", "Busova캜a", "Bu쬴m", "Cazin", "캛apljina", "캛eli캖", "캛itluk", "Drvar", "Doboj Istok", "Doboj Jug", "Dobreti캖i", "Domaljevac-마mac", "Donji Vakuf", "Fo캜a-Ustikolina", "Fojnica", "Glamo캜", "Gora쬯e", "Gornji Vakuf-Uskoplje", "Gra캜anica", "Grada캜ac", "Grude", "Had쬴캖i", "Ilija코", "Jablanica", "Jajce", "Kakanj", "Kalesija", "Kiseljak", "Kladanj", "Klju캜", "Konjic", "Kupres", "Livno", "Ljubu코ki", "Lukavac", "Maglaj", "Mostar", "Neum", "Novi Travnik", "Od쬬k", "Olovo", "Ora코je", "Pale-Pra캜a", "Posu코je", "Prozor-Rama", "Ravno", "Sanski Most", "Sapna", "Sarajevo-Centar", "Sarajevo-Novi Grad", "Sarajevo-Novo Sarajevo", "Sarajevo-Stari Grad", "Stolac", "Srebrenik", "Te코anj", "Tomislavgrad", "Travnik", "Trnovo", "Tuzla", "Usora", "Vare코", "Velika Kladu코a", "Visoko", "Vitez", "Vogo코캖a", "Zavidovi캖i", "Zenica", "콯ep캜e", "콯ivinice"],
            "RS": ["Banja Luka", "Berkovi캖i", "Bijeljina", "Bile캖a", "Bratunac", "Brod", "캛ajni캜e", "캛elinac", "Derventa", "Doboj", "Donji 콯abar", "Fo캜a", "Gacko", "Gradi코ka", "Han Pijesak", "Isto캜na Ilid쬬", "Isto캜ni Drvar", "Isto캜ni Mostar", "Isto캜ni Stari Grad", "Isto캜no Novo Sarajevo", "Jezero", "Kalinovik", "Kne쬰vo", "Kostajnica", "Kotor Varo코", "Kozarska Dubica", "Krupa na Uni", "Kupres", "Lakta코i", "Lopare", "Ljubinje", "Mili캖i", "Modri캜a", "Mrkonji캖 Grad", "Nevesinje", "Novi Grad", "Novo Gora쬯e", "Osmaci", "O코tra Luka", "Pale", "Pelagi캖evo", "Petrovac", "Petrovo", "Prijedor", "Prnjavor", "Ribnik", "Rogatica", "Rudo", "Sokolac", "Srbac", "Srebrenica", "Stanari", "마mac", "만kovi캖i", "말povo", "Tesli캖", "Trebinje", "Trnovo", "Ugljevik", "Vi코egrad", "Vlasenica", "Vukosavlje", "Zavidovi캖i", "Zvornik"],
            "BD": ["Br캜ko Distrikt"]
        };

        function azurirajOpcine() {
            const entitet = document.getElementById('entitet').value;
            const opcinaSelect = document.getElementById('opcina');
            opcinaSelect.innerHTML = '<option value="">Odaberite op캖inu...</option>';
            if(entitet && podaci[entitet]) {
                podaci[entitet].sort().forEach(o => {
                    opcinaSelect.innerHTML += `<option value="${o}">${o}</option>`;
                });
            }
        }

        const alati = ["ChatGPT", "Claude AI", "Gemini", "DeepSeek", "Midjourney", "DALL-E", "GitHub Copilot", "Cursor", "Canva AI", "Sora/Runway Video", "ElevenLabs", "Perplexity"];
        const grid = document.getElementById('alati_grid');
        let odabraniAlati = [];

        alati.forEach(a => {
            const div = document.createElement('div');
            div.className = "p-3 bg-slate-900 border border-slate-700 rounded-xl text-xs text-center cursor-pointer hover:border-blue-500 transition-all";
            div.innerText = a;
            div.onclick = function() {
                this.classList.toggle('selected');
                if(odabraniAlati.includes(a)) odabraniAlati = odabraniAlati.filter(i => i !== a);
                else odabraniAlati.push(a);
            };
            grid.appendChild(div);
        });

        document.getElementById('usteda').oninput = function() { document.getElementById('usteda_val').innerText = this.value; }

        function pokaziPut() {
            const struka = document.getElementById('struka').value;
            const kont = document.getElementById('dinamicki_sadrzaj');
            kont.innerHTML = '';
            let naslov = "", opis = "", opcije = [];

            if(struka.includes('ucenik')) {
                naslov = "Fokus na obrazovanje"; opis = "Predmeti u kojima Vam AI poma쬰:";
                opcije = ["Matematika", "Fizika", "Maternji jezik", "Strani jezici", "Informatika", "Geografija/Historija"];
                if(struka === 'ucenik_ss') opcije.push("CAD/Tehni캜ko crtanje", "Elektrotehnika", "Programiranje");
            } else if(struka === 'proizvodnja') {
                naslov = "Tehni캜ki/Industrijski sektor"; opis = "Tehnologija na radnom mjestu:";
                opcije = ["PLC Automatizacija", "Senzorska dijagnostika", "AI optimizacija procesa", "Odr쬬vanje ma코ina", "Roboti캜ki sistemi"];
            } else if(struka === 'biznis') {
                naslov = "Poslovna administracija"; opis = "Primarna svrha kori코tenja:";
                opcije = ["Automatizacija izvje코taja", "Analiza prodaje", "Marketing strategije", "Komunikacija sa klijentima", "Finansijsko planiranje"];
            } else if(struka === 'it_sektor') {
                naslov = "Digitalni razvoj"; opis = "Specifi캜na primjena:";
                opcije = ["Pisanje koda (Coding)", "Debugiranje", "UI/UX dizajn", "Generisanje dokumentacije", "Video/Foto editovanje"];
            }

            if(naslov) {
                kont.innerHTML = `<h2 class="text-2xl font-bold mb-2">${naslov}</h2><p class="mb-6 text-slate-400">${opis}</p>`;
                opcije.forEach(o => {
                    kont.innerHTML += `<label class="block p-4 bg-slate-900 border border-slate-700 rounded-xl mb-3 cursor-pointer hover:bg-slate-800 transition-all"><input type="checkbox" name="spec" value="${o}" class="mr-3"> ${o}</label>`;
                });
            }
        }

        function nextStep(s) {
            document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
            document.getElementById('step' + s).classList.add('active');
        }

        async function submitData() {
            const usteda = parseInt(document.getElementById('usteda').value);
            const pretplata = document.getElementById('pretplata').checked;
            let score = 30 + (usteda * 2.5) + (pretplata ? 30 : 0) + (odabraniAlati.length * 4);
            if(score > 150) score = 150;

            const data = {
                entitet: document.getElementById('entitet').value,
                opcina: document.getElementById('opcina').value,
                struka: document.getElementById('struka').options[document.getElementById('struka').selectedIndex].text,
                specificni_odgovori: Array.from(document.querySelectorAll('input[name="spec"]:checked')).map(e => e.value).join(', '),
                alati: odabraniAlati.join(', '),
                ustedjeno_vrijeme: usteda,
                placa_pretplatu: pretplata,
                uticaj_na_posao: "Pozitivan",
                ai_iq_score: score
            };

            try {
                const res = await fetch('https://ai-mapa-bih-1.onrender.com/submit-survey', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });
                if(res.ok) {
                    document.getElementById('iq_score').innerText = score.toFixed(1);
                    document.getElementById('hvala_msg').innerText = `Zahvaljujemo na u캜e코캖u. Va코i odgovori su zavedeni u bazu podataka za op캖inu ${data.opcina} i doprinose nacionalnom istra쬴vanju digitalne transformacije.`;
                    nextStep(4);
                }
            } catch (e) { alert("Povezivanje sa serverom nije uspjelo."); }
        }
    </script>
</body>
</html>