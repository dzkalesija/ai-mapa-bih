<!DOCTYPE html>
<html lang="bs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Monitor BiH | Nacionalna Platforma</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Inter:wght@200;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #010409; --primary: #58a6ff; --accent: #3fb950; --card: #0d1117; }
        body { background-color: var(--bg); color: #e6edf3; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .mono { font-family: 'Space Mono', monospace; }
        .step { display: none; }
        .step.active { display: block; animation: fadeIn 0.6s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* High-Contrast Glass UI */
        .glass { background: rgba(13, 17, 23, 0.95); border: 1px solid #30363d; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7); }
        .ai-banner { border-bottom: 1px solid rgba(88, 166, 255, 0.1); background: linear-gradient(90deg, transparent, rgba(88, 166, 255, 0.05), transparent); }
        
        .card-opt { border: 1px solid #30363d; transition: 0.2s; background: #161b22; color: #8b949e; cursor: pointer; }
        .card-opt:hover { border-color: var(--primary); color: #f0f6fc; }
        .selected { border-color: var(--primary) !important; background: rgba(88, 166, 255, 0.1) !important; color: var(--primary) !important; font-weight: 600; }
        
        select { background: #0d1117 !important; border: 1px solid #30363d !important; color: #f0f6fc !important; }
        select:focus { border-color: var(--primary) !important; }
        
        input[type="range"] { accent-color: var(--primary); }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="intro-screen" class="fixed inset-0 z-50 bg-[#010409] flex items-center justify-center p-6">
        <div class="max-w-2xl w-full mono">
            <div id="terminal" class="text-blue-400 text-sm md:text-base leading-relaxed mb-8"></div>
            <button id="start-btn" onclick="startSurvey()" class="hidden px-8 py-4 border border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-white transition-all uppercase tracking-[0.3em] text-[10px] font-bold">Inicijalizuj Analizu</button>
        </div>
    </div>

    <div class="max-w-4xl w-full glass p-0 rounded-[2rem] overflow-hidden relative z-10">
        
        <div class="ai-banner py-4 text-center">
            <p class="text-[9px] tracking-[0.4em] uppercase text-blue-400 font-mono">
                Anketa kreirana u potpunosti pomoću AI i koristeći AI infrastrukturu
            </p>
        </div>

        <div class="p-8 md:p-12">
            <form id="monitorForm">
                <div class="step active" id="step1">
                    <div class="text-center mb-12">
                        <h2 class="text-[10px] uppercase tracking-[0.5em] text-blue-500 mb-2">Sistemski Input</h2>
                        <h1 class="text-2xl font-light text-white">Geografska i Sektorska Pripadnost</h1>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="text-[10px] uppercase text-slate-500 block mb-2 ml-1">Regija / Entitet</label>
                            <select id="entitet" onchange="fillOpcine()" class="w-full p-4 rounded-xl text-sm outline-none transition-all">
                                <option value="">Odaberi...</option>
                                <option value="FBiH">Federacija BiH</option>
                                <option value="RS">Republika Srpska</option>
                                <option value="BD">Brčko Distrikt</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-[10px] uppercase text-slate-500 block mb-2 ml-1">Općina / Grad</label>
                            <select id="opcina" onchange="checkBtn1()" class="w-full p-4 rounded-xl text-sm outline-none">
                                <option value="">Prvo odaberi regiju...</option>
                            </select>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
                        <div>
                            <label class="text-[10px] uppercase text-slate-500 block mb-2 ml-1">Sektor djelovanja</label>
                            <select id="sektor" onchange="updateSubSectors()" class="w-full p-4 rounded-xl text-sm outline-none">
                                <option value="">Odaberi sektor...</option>
                                <option value="obrazovanje">Obrazovanje i Nauka</option>
                                <option value="privreda">Privreda i Industrija</option>
                                <option value="javni">Javni sektor i Zdravstvo</option>
                                <option value="kreativa">IT i Kreativna industrija</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-[10px] uppercase text-slate-500 block mb-2 ml-1">Specifična oblast</label>
                            <select id="pod_sektor" onchange="checkBtn1()" class="w-full p-4 rounded-xl text-sm outline-none">
                                <option value="">Čekanje na sektor...</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" id="btn1" onclick="next(2)" disabled class="w-full bg-blue-600/10 border border-blue-500/20 py-5 rounded-2xl text-[10px] uppercase tracking-[0.3em] transition-all opacity-40 cursor-not-allowed text-blue-400">Nastavi na evaluaciju</button>
                </div>

                <div class="step" id="step2">
                    <div class="text-center mb-10">
                        <h2 id="naslov_oblasti" class="text-blue-400 uppercase text-[10px] tracking-widest font-bold"></h2>
                    </div>
                    <div id="pitanja_container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-10"></div>
                    <button type="button" onclick="next(3)" class="w-full bg-blue-600/20 border border-blue-500/30 p-5 rounded-xl text-[10px] uppercase tracking-widest text-blue-400">Sledeće: AI Alati</button>
                </div>

                <div class="step" id="step3">
                    <div id="alati_grid" class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-10"></div>
                    <div class="max-w-md mx-auto text-center mb-12">
                        <label class="text-[10px] uppercase text-slate-500 block mb-6">Procijenjena ušteda vremena putem AI</label>
                        <input type="range" id="usteda" min="0" max="100" value="15" class="w-full h-1 bg-slate-800 appearance-none accent-blue-500" oninput="uVal.innerText=this.value+'%'">
                        <div id="uVal" class="mt-4 text-3xl font-thin text-blue-400">15%</div>
                    </div>
                    <button type="button" onclick="posalji()" class="w-full bg-blue-600 hover:bg-blue-500 p-7 rounded-2xl text-[11px] uppercase font-bold tracking-[0.4em] transition-all text-white shadow-lg shadow-blue-900/20">Generiši IDA Index</button>
                </div>

                <div class="step text-center" id="step4">
                    <div class="py-10">
                        <p class="text-[10px] text-slate-500 uppercase tracking-[0.5em] mb-6">Index Digitalne Adaptacije</p>
                        <h1 id="score_val" class="text-[10rem] font-thin text-blue-500 leading-none">0</h1>
                        <div class="mt-12 pt-8 border-t border-white/5">
                            <button type="button" onclick="location.reload()" class="text-slate-500 hover:text-blue-400 text-[10px] uppercase tracking-widest transition-all">Započni novi unos</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <footer class="bg-[#161b22]/50 p-6 text-center border-t border-white/5">
            <p class="text-[9px] uppercase tracking-[0.2em] text-slate-500">
                Idejno rješenje: <span class="text-slate-300 font-bold">mr. Fuad Hasanović dipl.ing.inf.</span>
            </p>
        </footer>
    </div>

    <script>
        const opcineBiH = {
            "FBiH": ["Banovići", "Bihać", "Bosanska Krupa", "Bosanski Petrovac", "Bosansko Grahovo", "Breza", "Bugojno", "Busovača", "Bužim", "Cazin", "Čapljina", "Čelić", "Čitluk", "Doboj Istok", "Doboj Jug", "Dobretići", "Domaljevac-Šamac", "Donji Vakuf", "Drvar", "Foča-Ustikolina", "Fojnica", "Glamoč", "Goražde", "Gornji Vakuf-Uskoplje", "Gračanica", "Gradačac", "Grude", "Hadžići", "Ilijaš", "Jablanica", "Jajce", "Kakanj", "Kalesija", "Kiseljak", "Kladanj", "Ključ", "Konjic", "Kreševo", "Kupres", "Livno", "Ljubuški", "Lukavac", "Maglaj", "Mostar", "Neum", "Novi Travnik", "Odžak", "Olovo", "Orašje", "Pale-Prača", "Posušje", "Prozor-Rama", "Ravno", "Sanski Most", "Sapna", "Sarajevo-Centar", "Sarajevo-Novi Grad", "Sarajevo-Novo Sarajevo", "Sarajevo-Stari Grad", "Srebrenik", "Stolac", "Tešanj", "Tomislavgrad", "Travnik", "Trnovo", "Tuzla", "Usora", "Vareš", "Velika Kladuša", "Visoko", "Vitez", "Vogošća", "Zavidovići", "Zenica", "Žepče", "Živinice"],
            "RS": ["Banja Luka", "Berkovići", "Bijeljina", "Bileća", "Kostajnica", "Brod", "Bratunac", "Čajniče", "Čelinac", "Derventa", "Doboj", "Donji Žabar", "Foča", "Gacko", "Gradiška", "Han Pijesak", "Istočna Ilidža", "Istočni Drvar", "Istočni Mostar", "Istočni Stari Grad", "Istočno Novo Sarajevo", "Jezero", "Kalinovik", "Kneževo", "Kotor Varoš", "Kozarska Dubica", "Krupa na Uni", "Kupres", "Laktaši", "Lopare", "Ljubinje", "Milići", "Modriča", "Mrkonjić Grad", "Nevesinje", "Novi Grad", "Novo Goražde", "Osmaci", "Oštra Luka", "Pale", "Pelagićevo", "Petrovac", "Petrovo", "Prijedor", "Prnjavor", "Ribnik", "Rogatica", "Rudo", "Sokolac", "Srbac", "Srebrenica", "Stanari", "Šamac", "Šekovići", "Šipovo", "Teslić", "Trebinje", "Trnovo", "Ugljevik", "Višegrad", "Vlasenica", "Vukosavlje", "Zvornik"],
            "BD": ["Brčko Distrikt"]
        };

        const sektorskaMapa = {
            "obrazovanje": [
                {id:"os", name:"Osnovno obrazovanje", q:["AI Asistencija u nastavi", "Interaktivno učenje", "Personalizovani planovi"]},
                {id:"ss", name:"Srednje obrazovanje", q:["Analiza literature", "Pomoć pri kodiranju", "Priprema državne mature"]},
                {id:"ak", name:"Visoko obrazovanje / Akademija", q:["Naučno istraživanje", "Statistička obrada", "Akademsko pisanje"]}
            ],
            "privreda": [
                {id:"ind", name:"Industrija / Proizvodnja", q:["Prediktivno održavanje", "Optimizacija procesa", "Kontrola kvaliteta"]},
                {id:"agr", name:"Poljoprivreda", q:["Analiza zemljišta", "Satelitsko praćenje", "Pametno navodnjavanje"]},
                {id:"usl", name:"Uslužne djelatnosti", q:["Chatbot podrška", "Analiza tržišta", "Automatizacija bookinga"]}
            ],
            "javni": [
                {id:"adm", name:"Javna uprava / Administracija", q:["Digitalizacija arhiva", "Automatizacija rješenja", "Servisi za građane"]},
                {id:"med", name:"Medicina / Zdravstvo", q:["Radiološka analiza", "Trijaža pacijenata", "Medicinska dokumentacija"]}
            ],
            "kreativa": [
                {id:"it", name:"IT / Software Development", q:["Debugiranje koda", "Arhitektura sistema", "Automatizovano testiranje"]},
                {id:"mkt", name:"Marketing i Dizajn", q:["Generisanje vizuala", "Copywriting", "Video produkcija"]}
            ]
        };

        const alatiList = ["ChatGPT", "Claude", "Gemini", "DeepSeek", "Midjourney", "Perplexity", "Copilot", "Canva", "ElevenLabs", "Sora"];

        const introText = [
            "> INICIJALIZACIJA SISTEMA...",
            "> POVEZIVANJE SA NACIONALNOM BAZOM BiH...",
            "> UČITAVANJE ALGORITAMA ZA IZRAČUN IDA INDEXA...",
            "> AUTOR: mr. FUAD HASANOVIĆ dipl.ing.inf.",
            "> SPREMNO ZA EVALUACIJU."
        ];

        let line = 0;
        function typeIntro() {
            if (line < introText.length) {
                let div = document.createElement('div');
                div.className = "mb-2";
                div.innerHTML = introText[line];
                document.getElementById('terminal').appendChild(div);
                line++;
                setTimeout(typeIntro, 800);
            } else {
                document.getElementById('start-btn').classList.remove('hidden');
            }
        }
        window.onload = typeIntro;

        function startSurvey() {
            document.getElementById('intro-screen').style.display = 'none';
        }

        function fillOpcine() {
            const e = document.getElementById('entitet').value;
            const o = document.getElementById('opcina');
            o.innerHTML = '<option value="">Odaberi grad/općinu...</option>';
            if(e) opcineBiH[e].sort((a,b) => a.localeCompare(b, 'bs')).forEach(x => {
                o.innerHTML += `<option value="${x}">${x}</option>`;
            });
        }

        function updateSubSectors() {
            const s = document.getElementById('sektor').value;
            const ps = document.getElementById('pod_sektor');
            ps.innerHTML = '<option value="">Odaberi oblast...</option>';
            if(s) sektorskaMapa[s].forEach(x => {
                ps.innerHTML += `<option value="${x.id}">${x.name}</option>`;
            });
        }

        function checkBtn1() {
            const btn = document.getElementById('btn1');
            if(document.getElementById('pod_sektor').value && document.getElementById('opcina').value) {
                btn.disabled = false; btn.classList.remove('opacity-40', 'cursor-not-allowed');
            }
        }

        function next(s) {
            if(s === 2) {
                const sVal = document.getElementById('sektor').value;
                const psVal = document.getElementById('pod_sektor').value;
                const oblast = sektorskaMapa[sVal].find(x => x.id === psVal);
                document.getElementById('naslov_oblasti').innerText = "Analiza oblasti: " + oblast.name;
                const container = document.getElementById('pitanja_container');
                container.innerHTML = '';
                oblast.q.forEach(q => {
                    const d = document.createElement('div');
                    d.className = "card-opt p-5 rounded-2xl text-[10px] uppercase text-center flex items-center justify-center min-h-[80px]";
                    d.innerHTML = `<input type="checkbox" name="odgovor" value="${q}" class="hidden">${q}`;
                    d.onclick = function() {
                        const cb = this.querySelector('input');
                        cb.checked = !cb.checked;
                        this.classList.toggle('selected', cb.checked);
                    };
                    container.appendChild(d);
                });
            }
            if(s === 3 && document.getElementById('alati_grid').innerHTML === '') {
                alatiList.forEach(a => {
                    const d = document.createElement('div');
                    d.className = "card-opt p-4 rounded-xl text-[9px] text-center uppercase tracking-tighter";
                    d.innerText = a;
                    d.onclick = function() { this.classList.toggle('selected'); };
                    document.getElementById('alati_grid').appendChild(d);
                });
            }
            document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
            document.getElementById('step' + s).classList.add('active');
        }

        async function posalji() {
            const selectedAlati = Array.from(document.querySelectorAll('#alati_grid .selected')).map(x => x.innerText);
            const selectedOdgovori = Array.from(document.querySelectorAll('input[name="odgovor"]:checked')).map(x => x.value);
            const usteda = parseInt(document.getElementById('usteda').value);
            
            let score = (35 + (selectedOdgovori.length * 9) + (selectedAlati.length * 4) + (usteda * 0.2)).toFixed(1);
            score = Math.min(score, 100);

            const data = {
                entitet: document.getElementById('entitet').value,
                opcina: document.getElementById('opcina').value,
                sektor: document.getElementById('sektor').options[document.getElementById('sektor').selectedIndex].text,
                pod_sektor: document.getElementById('pod_sektor').options[document.getElementById('pod_sektor').selectedIndex].text,
                odgovori: selectedOdgovori.join(", ") || "Nema specifične primjene",
                alati: selectedAlati.join(", ") || "Bez alata",
                usteda: usteda,
                stav: "Pozitivan",
                score: parseFloat(score)
            };

            document.getElementById('score_val').innerText = score;
            next(4);

            await fetch('https://ai-mapa-bih-1.onrender.com/submit-survey', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            });
        }
    </script>
</body>
</html>