<!DOCTYPE html>
<html lang="bs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Monitor BiH | Nacionalna Analitika</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400&display=swap" rel="stylesheet">
    <style>
        body { background-color: #0b1120; color: #f1f5f9; font-family: 'Inter', sans-serif; font-weight: 200; letter-spacing: 0.05em; }
        .step { display: none; }
        .step.active { display: block; animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .glass { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(25px); border: 1px solid rgba(255,255,255,0.05); }
        .card-opt { border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; cursor: pointer; background: rgba(30, 41, 59, 0.3); }
        .selected { border-color: #3b82f6 !important; background: rgba(59, 130, 246, 0.1) !important; color: #60a5fa; box-shadow: 0 0 20px rgba(59, 130, 246, 0.1); }
        input[type="checkbox"] { display: none; }
        select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 1rem center; background-size: 1.2em; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-slate-900 via-blue-950 to-slate-950">

    <div class="max-w-5xl w-full glass p-10 md:p-20 rounded-[3.5rem] shadow-2xl">
        <header class="text-center mb-16">
            <h1 class="text-3xl font-light tracking-[0.6em] text-blue-400 uppercase">AI Monitor BiH</h1>
            <div class="h-px w-32 bg-gradient-to-r from-transparent via-blue-500 to-transparent mx-auto mt-6 opacity-30"></div>
        </header>

        <form id="monitorForm">
            <div class="step active" id="step1">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                    <div>
                        <label class="text-[10px] uppercase tracking-[0.3em] text-slate-500 mb-4 block">Regija / Entitet</label>
                        <select id="entitet" onchange="fillOpcine()" class="w-full bg-slate-900/80 border border-slate-700/50 p-5 rounded-2xl outline-none focus:border-blue-500 text-xs tracking-widest">
                            <option value="">Odaberi...</option>
                            <option value="FBiH">Federacija BiH</option>
                            <option value="RS">Republika Srpska</option>
                            <option value="BD">Brčko Distrikt</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-[10px] uppercase tracking-[0.3em] text-slate-500 mb-4 block">Općina / Grad</label>
                        <select id="opcina" class="w-full bg-slate-900/80 border border-slate-700/50 p-5 rounded-2xl outline-none text-xs tracking-widest">
                            <option value="">Lokacija...</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                    <div>
                        <label class="text-[10px] uppercase tracking-[0.3em] text-slate-500 mb-4 block">Glavna Djelatnost</label>
                        <select id="sektor" onchange="updateSubSectors()" class="w-full bg-slate-900/80 border border-slate-700/50 p-5 rounded-2xl outline-none text-blue-300 text-xs tracking-widest">
                            <option value="">Sektor...</option>
                            <option value="obrazovanje">Obrazovanje i Nauka</option>
                            <option value="industrija">Industrija i Energija</option>
                            <option value="trgovina">Trgovina i Marketing</option>
                            <option value="zdravstvo">Zdravstvo i Uprava</option>
                            <option value="kreativna">Kreativa, IT i Sport</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-[10px] uppercase tracking-[0.3em] text-slate-500 mb-4 block">Pod-sektor / Uža oblast</label>
                        <select id="pod_sektor" onchange="pokaziPitanja()" class="w-full bg-slate-900/80 border border-slate-700/50 p-5 rounded-2xl outline-none text-emerald-400 text-xs tracking-widest">
                            <option value="">Specijalizacija...</option>
                        </select>
                    </div>
                </div>

                <button type="button" onclick="next(2)" id="btnNext1" class="w-full bg-blue-600/30 hover:bg-blue-600/80 p-6 rounded-[2rem] text-[10px] font-semibold uppercase tracking-[0.4em] transition-all opacity-40 cursor-not-allowed" disabled>Iniciraj Analizu</button>
            </div>

            <div class="step" id="step2">
                <h3 id="naslov_oblasti" class="text-xs uppercase tracking-[0.3em] text-blue-400 mb-10 italic text-center">Specifične AI Metrike</h3>
                <div id="pitanja_container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-12"></div>
                <button type="button" onclick="next(3)" class="w-full bg-blue-600/50 p-6 rounded-[2rem] text-[10px] font-semibold uppercase tracking-[0.4em]">Tehnološki Parametri</button>
            </div>

            <div class="step" id="step3">
                <label class="text-[10px] uppercase tracking-[0.3em] text-slate-500 mb-8 block text-center italic">Aktivni AI Ekosistem (Odaberite alate koje koristite)</label>
                <div id="alati_grid" class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-12"></div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 mb-16">
                    <div>
                        <label class="text-[10px] uppercase tracking-[0.3em] text-slate-500 mb-6 block italic">Optimizacija vremena kroz AI (%)</label>
                        <input type="range" id="usteda" min="0" max="100" value="10" class="w-full h-1 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-blue-500">
                        <div class="text-center mt-4 text-blue-400 font-light text-xl"><span id="usteda_val">10</span>%</div>
                    </div>
                    <div>
                        <label class="text-[10px] uppercase tracking-[0.3em] text-slate-500 mb-6 block italic">Strateško opredjeljenje</label>
                        <div class="flex gap-4">
                            <label class="flex-1 text-center p-4 border border-slate-800 rounded-2xl cursor-pointer text-[9px] uppercase tracking-widest hover:border-blue-500 transition-all">
                                <input type="radio" name="stav" value="Inovator" checked> Inovacija
                            </label>
                            <label class="flex-1 text-center p-4 border border-slate-800 rounded-2xl cursor-pointer text-[9px] uppercase tracking-widest hover:border-blue-500 transition-all">
                                <input type="radio" name="stav" value="Oprezan"> Sigurnost
                            </label>
                        </div>
                    </div>
                </div>
                <button type="button" onclick="posalji()" id="submitBtn" class="w-full bg-emerald-600/30 hover:bg-emerald-600/80 p-8 rounded-[2.5rem] text-[12px] font-bold uppercase tracking-[0.5em] transition-all">Finaliziraj i Generišu IDA</button>
            </div>

            <div class="step text-center" id="step4">
                <p class="text-[10px] uppercase tracking-[0.6em] text-slate-500 mb-10 italic">Index Digitalne Adaptacije (IDA)</p>
                <h1 id="score_val" class="text-[12rem] font-thin text-blue-400 leading-none mb-16">0</h1>
                <button type="button" onclick="location.reload()" class="text-slate-600 hover:text-white border-b border-slate-800 pb-2 text-[10px] uppercase tracking-[0.4em] transition-colors">Nova Sesija</button>
            </div>
        </form>
    </div>

    <script>
        // SVE OPCINE BIH
        const opcineBiH = {
            "FBiH": ["Banovići", "Bihać", "Bosanska Krupa", "Bosanski Petrovac", "Bosansko Grahovo", "Breza", "Bugojno", "Busovača", "Bužim", "Cazin", "Čapljina", "Čelić", "Čitluk", "Drvar", "Doboj Istok", "Doboj Jug", "Dobretići", "Domaljevac-Šamac", "Donji Vakuf", "Foča-Ustikolina", "Fojnica", "Glamoč", "Goražde", "Gornji Vakuf-Uskoplje", "Gračanica", "Gradačac", "Grude", "Hadžići", "Ilijaš", "Jablanica", "Jajce", "Kakanj", "Kalesija", "Kiseljak", "Kladanj", "Ključ", "Konjic", "Kupres", "Livno", "Ljubuški", "Lukavac", "Maglaj", "Mostar", "Neum", "Novi Travnik", "Odžak", "Olovo", "Orašje", "Pale-Prača", "Posušje", "Prozor-Rama", "Ravno", "Sanski Most", "Sapna", "Sarajevo-Centar", "Sarajevo-Novi Grad", "Sarajevo-Novo Sarajevo", "Sarajevo-Stari Grad", "Stolac", "Srebrenik", "Tešanj", "Tomislavgrad", "Travnik", "Trnovo", "Tuzla", "Usora", "Vareš", "Velika Kladuša", "Visoko", "Vitez", "Vogošća", "Zavidovići", "Zenica", "Žepče", "Živinice"],
            "RS": ["Banja Luka", "Berkovići", "Bijeljina", "Bileća", "Bratunac", "Brod", "Čajniče", "Čelinac", "Derventa", "Doboj", "Donji Žabar", "Foča", "Gacko", "Gradiška", "Han Pijesak", "Istočna Ilidža", "Istočni Drvar", "Istočni Mostar", "Istočni Stari Grad", "Istočno Novo Sarajevo", "Jezero", "Kalinovik", "Kneževo", "Kostajnica", "Kotor Varoš", "Kozarska Dubica", "Krupa na Uni", "Kupres", "Laktaši", "Lopare", "Ljubinje", "Milići", "Modriča", "Mrkonjić Grad", "Nevesinje", "Novi Grad", "Novo Goražde", "Osmaci", "Oštra Luka", "Pale", "Pelagićevo", "Petrovac", "Petrovo", "Prijedor", "Prnjavor", "Ribnik", "Rogatica", "Rudo", "Sokolac", "Srbac", "Srebrenica", "Stanari", "Šamac", "Šekovići", "Šipovo", "Teslić", "Trebinje", "Trnovo", "Ugljevik", "Višegrad", "Vlasenica", "Vukosavlje", "Zvornik"],
            "BD": ["Brčko Distrikt"]
        };

        // VRHUNSKA ANALITIKA - PODSEKTORI I PITANJA
        const arhitekturaSektora = {
            "obrazovanje": [
                {id: "os", name: "Osnovna škola", q: ["Pomoć pri izradi zadaća", "Individualni AI tutor", "Učenje jezika kroz chatbot", "Pomoć pri kreativnom pisanju"]},
                {id: "ss", name: "Srednja škola", q: ["Sažimanje obimne literature", "Priprema za eksternu maturu", "Pisanje koda i debugging", "Analiza naučnih izvora"]},
                {id: "vss", name: "Fakultet / Akademija", q: ["Analiza naučnih radova", "Statistička obrada podataka", "Simulacija istraživačkih modela", "Akademsko citiranje i formatiranje"]}
            ],
            "industrija": [
                {id: "proiz", name: "Proizvodnja i Fabrike", q: ["Prediktivno održavanje mašina", "Optimizacija lanca snabdijevanja", "Vizuelna kontrola kvaliteta", "Energetska efikasnost pogona"]},
                {id: "agro", name: "Poljoprivreda", q: ["Analiza vlažnosti i sastava tla", "Detekcija bolesti biljaka", "Satelitsko predviđanje prinosa", "Automatizovano navodnjavanje"]},
                {id: "energo", name: "Energetika", q: ["Balansiranje distributivne mreže", "Predviđanje potrošnje energije", "Detekcija kvarova na mreži", "Upravljanje obnovljivim izvorima"]}
            ],
            "trgovina": [
                {id: "mkt", name: "Marketing i PR", q: ["Generisanje prodajnih vizuala", "Copywriting za društvene mreže", "Sentiment analiza brenda", "Automatizacija email kampanja"]},
                {id: "prod", name: "Maloprodaja / E-commerce", q: ["Dinamičko određivanje cijena", "Personalizovane preporuke (Upsell)", "Upravljanje zalihama (Demand)", "AI prodajni asistenti"]},
                {id: "tur", name: "Turizam / Ugostiteljstvo", q: ["Personalizovani planovi putovanja", "Chatbot podrška na više jezika", "Analiza recenzija gostiju", "Optimizacija jelovnika i troškova"]}
            ],
            "zdravstvo": [
                {id: "med", name: "Medicina i Bolnice", q: ["Analiza rendgenskih snimaka (AI)", "Automatizacija medicinskih nalaza", "Trijaža i procjena hitnosti", "Istraživanje baze lijekova"]},
                {id: "adm", name: "Javna uprava / Općine", q: ["Digitalni šalteri i automatizacija", "Analiza javnih nabavki", "Sistematizacija arhivske građe", "Pisanje nacrta pravnih akata"]},
                {id: "prav", name: "Pravosuđe i Advokatura", q: ["Pretraga sudske prakse", "Analiza rizika u ugovorima", "Automatizacija podnesaka", "Transkripcija ročišta"]}
            ],
            "kreativna": [
                {id: "it", name: "IT i Development", q: ["Generisanje i refaktoring koda", "Arhitektura sistema kroz AI", "Automatizacija testiranja (QA)", "Cybersecurity monitoring"]},
                {id: "umj", name: "Umjetnost i Dizajn", q: ["Digitalna restauracija", "Generisanje koncept-arta", "AI asistencija u montaži", "Muzička kompozicija"]},
                {id: "spo", name: "Sport i Rekreacija", q: ["Analiza biometrije sportista", "Video analiza taktike", "Predviđanje povreda", "Statistička analiza protivnika"]}
            ]
        };

        const alati = ["ChatGPT", "Claude AI", "Gemini", "DeepSeek", "Midjourney", "Perplexity", "GitHub Copilot", "Canva AI", "Sora", "ElevenLabs"];

        function fillOpcine() {
            const e = document.getElementById('entitet').value;
            const o = document.getElementById('opcina');
            o.innerHTML = '<option value="">Odaberi lokaciju...</option>';
            if(e && opcineBiH[e]) opcineBiH[e].sort().forEach(x => o.innerHTML += `<option value="${x}">${x}</option>`);
        }

        function updateSubSectors() {
            const s = document.getElementById('sektor').value;
            const ps = document.getElementById('pod_sektor');
            ps.innerHTML = '<option value="">Specijalizacija...</option>';
            if(s && arhitekturaSektora[s]) {
                arhitekturaSektora[s].forEach(item => {
                    ps.innerHTML += `<option value="${item.id}">${item.name}</option>`;
                });
            }
        }

        function pokaziPitanja() {
            const s = document.getElementById('sektor').value;
            const psVal = document.getElementById('pod_sektor').value;
            const c = document.getElementById('pitanja_container');
            const btn = document.getElementById('btnNext1');
            c.innerHTML = '';
            
            if(psVal) {
                btn.disabled = false; btn.classList.remove('opacity-40', 'cursor-not-allowed');
                const oblast = arhitekturaSektora[s].find(x => x.id === psVal);
                document.getElementById('naslov_oblasti').innerText = "AI Metrike za: " + oblast.name;
                oblast.q.forEach(p => {
                    const div = document.createElement('div');
                    div.className = "card-opt p-5 rounded-2xl text-[10px] uppercase tracking-widest flex items-center";
                    div.innerHTML = `<input type="checkbox" name="odgovor" value="${p}" onchange="toggleCard(this)"> <span class="ml-4">${p}</span>`;
                    div.onclick = () => div.querySelector('input').click();
                    c.appendChild(div);
                });
            }
        }

        function toggleCard(cb) { cb.parentElement.classList.toggle('selected', cb.checked); }

        function next(s) {
            document.querySelectorAll('.step').forEach(x => x.classList.remove('active'));
            document.getElementById('step' + s).classList.add('active');
            if(s === 3 && document.getElementById('alati_grid').innerHTML === '') {
                alati.forEach(a => {
                    const div = document.createElement('div');
                    div.className = "card-opt p-5 rounded-xl text-[9px] text-center uppercase tracking-tighter";
                    div.innerText = a;
                    div.onclick = function() { this.classList.toggle('selected'); };
                    document.getElementById('alati_grid').appendChild(div);
                });
            }
        }

        document.getElementById('usteda').oninput = function() { document.getElementById('usteda_val').innerText = this.value; }

        async function posalji() {
            const btn = document.getElementById('submitBtn');
            btn.disabled = true; btn.innerText = "SINKRONIZACIJA...";
            const selectedAlati = Array.from(document.querySelectorAll('#alati_grid .selected')).map(x => x.innerText);
            const selectedOdgovori = Array.from(document.querySelectorAll('input[name="odgovor"]:checked')).map(x => x.value);
            const usteda = parseInt(document.getElementById('usteda').value);
            
            // FORMULA ZA IDA SCORE
            let score = 35 + (selectedOdgovori.length * 8) + (selectedAlati.length * 3.5) + (usteda * 0.2);
            score = Math.min(score, 100).toFixed(1);

            const data = {
                entitet: document.getElementById('entitet').value,
                opcina: document.getElementById('opcina').value,
                sektor: document.getElementById('sektor').options[document.getElementById('sektor').selectedIndex].text,
                pod_sektor: document.getElementById('pod_sektor').options[document.getElementById('pod_sektor').selectedIndex].text,
                odgovori: selectedOdgovori.join(", "),
                alati: selectedAlati.join(", "),
                usteda: usteda,
                stav: document.querySelector('input[name="stav"]:checked').value,
                score: parseFloat(score)
            };

            try {
                await fetch('https://ai-mapa-bih-1.onrender.com/submit-survey', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });
                document.getElementById('score_val').innerText = score;
                next(4);
            } catch (e) {
                alert("Greška. Provjerite internet konekciju.");
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>