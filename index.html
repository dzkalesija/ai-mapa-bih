<!DOCTYPE html>
<html lang="bs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Mapa BiH - Nacionalni Monitor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { background-color: #0f172a; color: white; font-family: 'Inter', sans-serif; font-weight: 300; }
        .step { display: none; }
        .step.active { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .card { background: rgba(30, 41, 59, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); }
        .selected { border-color: #3b82f6 !important; background: rgba(59, 130, 246, 0.15); }
        .btn-glow { transition: all 0.3s; background: linear-gradient(90deg, #1d4ed8, #3b82f6); }
        .btn-glow:hover { transform: translateY(-2px); box-shadow: 0 8px 20px -8px #3b82f6; }
        select, input { font-weight: 400; }
    </style>
</head>
<body class="p-4 md:p-12 min-h-screen flex items-center">

    <div class="max-w-4xl mx-auto card p-8 md:p-14 rounded-[2.5rem] shadow-2xl w-full">
        <header class="text-center mb-16">
            <h1 class="text-3xl font-light tracking-[0.15em] text-blue-400 uppercase">AI Monitor Bosne i Hercegovine</h1>
            <div class="h-px w-24 bg-blue-500/30 mx-auto mt-4"></div>
        </header>

        <form id="aiSurvey">
            <div class="step active" id="step1">
                <h2 class="text-sm uppercase tracking-[0.3em] text-slate-500 mb-10 italic">01. Profiliranje ispitanika</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                    <div>
                        <label class="block text-[10px] uppercase tracking-widest text-slate-400 mb-3 ml-2">Regija / Entitet</label>
                        <select id="entitet" onchange="azurirajOpcine()" class="w-full bg-slate-900/80 border border-slate-700 p-4 rounded-2xl outline-none focus:border-blue-500 transition-colors">
                            <option value="">Odaberi...</option>
                            <option value="FBiH">Federacija BiH</option>
                            <option value="RS">Republika Srpska</option>
                            <option value="BD">Brčko Distrikt</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-[10px] uppercase tracking-widest text-slate-400 mb-3 ml-2">Lokalna zajednica</label>
                        <select id="opcina" class="w-full bg-slate-900/80 border border-slate-700 p-4 rounded-2xl outline-none focus:border-blue-500 transition-colors">
                            <option value="">Prvo odaberi entitet...</option>
                        </select>
                    </div>
                </div>

                <div class="mb-12">
                    <label class="block text-[10px] uppercase tracking-widest text-slate-400 mb-3 ml-2">Sektor djelovanja</label>
                    <select id="struka" onchange="pokaziPut()" class="w-full bg-slate-900/80 border border-slate-700 p-4 rounded-2xl outline-none text-blue-300">
                        <option value="">Odaberi sektor...</option>
                        <option value="zdravstvo">Zdravstvo i Medicina</option>
                        <option value="it_sektor">IT i Tehnološki sektor</option>
                        <option value="obrazovanje">Obrazovanje i Nauka</option>
                        <option value="poljoprivreda">Poljoprivreda i Šumarstvo</option>
                        <option value="industrija">Industrija i Proizvodnja</option>
                        <option value="turizam">Turizam i Ugostiteljstvo</option>
                        <option value="trgovina">Trgovina i Marketing</option>
                        <option value="javna_uprava">Javna uprava i Socijalni sektor</option>
                        <option value="transport">Transport i Logistika</option>
                        <option value="student">Studenti i Mladi</option>
                    </select>
                </div>

                <button type="button" onclick="nextStep(2)" class="w-full btn-glow p-5 rounded-2xl font-semibold uppercase tracking-[0.2em] text-xs">Nastavi</button>
            </div>

            <div class="step" id="step2">
                <h2 class="text-sm uppercase tracking-[0.3em] text-slate-500 mb-10 italic">02. Vertikalna primjena AI</h2>
                <div id="dinamicki_sadrzaj" class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-10"></div>
                <button type="button" onclick="nextStep(3)" class="w-full btn-glow p-5 rounded-2xl font-semibold uppercase tracking-[0.2em] text-xs">Analiza alata</button>
            </div>

            <div class="step" id="step3">
                <h2 class="text-sm uppercase tracking-[0.3em] text-slate-500 mb-10 italic">03. Tehnološki stog i uštede</h2>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-10" id="alati_grid"></div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                    <div>
                        <label class="block text-[10px] uppercase tracking-widest text-slate-400 mb-4">Ušteda vremena kroz AI</label>
                        <select id="usteda" class="w-full bg-slate-900/80 border border-slate-700 p-4 rounded-2xl outline-none">
                            <option value="10">Minimalna (do 10%)</option>
                            <option value="30">Srednja (10% - 40%)</option>
                            <option value="60">Visoka (40% - 70%)</option>
                            <option value="90">Ekstremna (preko 70%)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-[10px] uppercase tracking-widest text-slate-400 mb-4">Percepcija uticaja</label>
                        <div class="flex gap-4">
                            <label class="flex-1 bg-slate-900/80 border border-slate-700 p-4 rounded-2xl cursor-pointer text-[10px] flex items-center uppercase tracking-widest">
                                <input type="radio" name="ocekivanje" value="Pozitivan" checked class="mr-3"> Optimizam
                            </label>
                            <label class="flex-1 bg-slate-900/80 border border-slate-700 p-4 rounded-2xl cursor-pointer text-[10px] flex items-center uppercase tracking-widest">
                                <input type="radio" name="ocekivanje" value="Negativan" class="mr-3"> Oprez
                            </label>
                        </div>
                    </div>
                </div>

                <button type="button" id="submitBtn" onclick="submitData()" class="w-full bg-emerald-600 hover:bg-emerald-500 p-6 rounded-[2rem] font-bold uppercase tracking-[0.3em] transition-all text-xs shadow-lg shadow-emerald-900/20">
                    Finaliziraj unos
                </button>
            </div>

            <div class="step text-center" id="step4">
                <div class="mb-8 opacity-30 italic uppercase tracking-[0.4em] text-[10px]">Indeks Digitalne Adaptacije (IDA)</div>
                <h1 class="text-8xl font-light text-blue-400 mb-6" id="iq_score">0</h1>
                <p class="text-slate-500 uppercase text-[10px] tracking-[0.2em] mb-16 italic" id="hvala_msg"></p>
                <button type="button" onclick="location.reload()" class="text-slate-400 hover:text-white border-b border-slate-800 pb-1 text-[10px] uppercase tracking-widest transition-colors">Nova sesija</button>
            </div>
        </form>
    </div>

    <script>
        const opcineBiH = {
            "FBiH": ["Banovići", "Bihać", "Bosanska Krupa", "Bosanski Petrovac", "Bosansko Grahovo", "Breza", "Bugojno", "Busovača", "Bužim", "Cazin", "Čapljina", "Čelić", "Čitluk", "Drvar", "Doboj Istok", "Doboj Jug", "Dobretići", "Domaljevac-Šamac", "Donji Vakuf", "Foča-Ustikolina", "Fojnica", "Glamoč", "Goražde", "Gornji Vakuf-Uskoplje", "Gračanica", "Gradačac", "Grude", "Hadžići", "Ilijaš", "Jablanica", "Jajce", "Kakanj", "Kalesija", "Kiseljak", "Kladanj", "Ključ", "Konjic", "Kupres", "Livno", "Ljubuški", "Lukavac", "Maglaj", "Mostar", "Neum", "Novi Travnik", "Odžak", "Olovo", "Orašje", "Pale-Prača", "Posušje", "Prozor-Rama", "Ravno", "Sanski Most", "Sapna", "Sarajevo-Centar", "Sarajevo-Novi Grad", "Sarajevo-Novo Sarajevo", "Sarajevo-Stari Grad", "Stolac", "Srebrenik", "Tešanj", "Tomislavgrad", "Travnik", "Trnovo", "Tuzla", "Usora", "Vareš", "Velika Kladuša", "Visoko", "Vitez", "Vogošća", "Zavidovići", "Zenica", "Žepče", "Živinice"],
            "RS": ["Banja Luka", "Berkovići", "Bijeljina", "Bileća", "Bratunac", "Brod", "Čajniče", "Čelinac", "Derventa", "Doboj", "Donji Žabar", "Foča", "Gacko", "Gradiška", "Han Pijesak", "Istočna Ilidža", "Istočni Drvar", "Istočni Mostar", "Istočni Stari Grad", "Istočno Novo Sarajevo", "Jezero", "Kalinovik", "Kneževo", "Kostajnica", "Kotor Varoš", "Kozarska Dubica", "Krupa na Uni", "Kupres", "Laktaši", "Lopare", "Ljubinje", "Milići", "Modriča", "Mrkonjić Grad", "Nevesinje", "Novi Grad", "Novo Goražde", "Osmaci", "Oštra Luka", "Pale", "Pelagićevo", "Petrovac", "Petrovo", "Prijedor", "Prnjavor", "Ribnik", "Rogatica", "Rudo", "Sokolac", "Srbac", "Srebrenica", "Stanari", "Šamac", "Šekovići", "Šipovo", "Teslić", "Trebinje", "Trnovo", "Ugljevik", "Višegrad", "Vlasenica", "Vukosavlje", "Zvornik"],
            "BD": ["Brčko Distrikt"]
        };

        function azurirajOpcine() {
            const e = document.getElementById('entitet').value;
            const s = document.getElementById('opcina');
            s.innerHTML = '<option value="">Odaberi općinu...</option>';
            if(e && opcineBiH[e]) opcineBiH[e].sort().forEach(o => s.innerHTML += `<option value="${o}">${o}</option>`);
        }

        const alati = ["ChatGPT", "DeepSeek", "Claude AI", "Gemini", "Midjourney", "DALL-E 3", "Copilot", "Perplexity", "Sora", "ElevenLabs", "Canva AI", "Cursor"];
        let odabraniAlati = [];
        alati.forEach(a => {
            const d = document.createElement('div');
            d.className = "p-3 bg-slate-900/80 border border-slate-800 rounded-xl text-[9px] text-center cursor-pointer transition-all uppercase tracking-widest font-medium";
            d.innerText = a;
            d.onclick = function() { this.classList.toggle('selected'); if(odabraniAlati.includes(a)) odabraniAlati = odabraniAlati.filter(x=>x!==a); else odabraniAlati.push(a); };
            document.getElementById('alati_grid').appendChild(d);
        });

        function pokaziPut() {
            const s = document.getElementById('struka').value;
            const k = document.getElementById('dinamicki_sadrzaj');
            k.innerHTML = '';
            let opcije = [];
            
            if(s === 'zdravstvo') opcije = ["Dijagnostika (AI slikovna)", "Analiza medicinskih podataka", "Personalizovano liječenje", "Automatizacija administracije"];
            else if(s === 'poljoprivreda') opcije = ["Precizna poljoprivreda", "Predviđanje prinosa", "Detekcija bolesti biljaka", "Sistemi navodnjavanja"];
            else if(s === 'industrija') opcije = ["Prediktivno održavanje", "Optimizacija lanca snabdijevanja", "Kontrola kvaliteta", "Energetska efikasnost"];
            else if(s === 'turizam') opcije = ["Personalizovane ponude", "Chatbot vodiči", "Analiza recenzija", "Dinamičke cijene"];
            else if(s === 'it_sektor') opcije = ["Generisanje koda", "Arhitektura sistema", "Sajber sigurnost", "Automatizacija testova"];
            else if(s === 'javna_uprava') opcije = ["Digitalni servisi", "Socijalno mapiranje", "Automatizacija dokumenata", "Analiza javnog mnijenja"];
            else opcije = ["Analiza tržišta", "Copywriting", "Pretraga informacija", "Kreativna vizuelizacija"];

            opcije.forEach(o => {
                k.innerHTML += `<label class="flex items-center p-4 bg-slate-900/40 border border-slate-800 rounded-2xl cursor-pointer hover:bg-slate-800/50 text-[10px] tracking-widest uppercase transition-colors">
                    <input type="checkbox" name="spec" value="${o}" class="mr-4 accent-blue-500"> ${o}
                </label>`;
            });
        }

        function nextStep(s) {
            document.querySelectorAll('.step').forEach(x => x.classList.remove('active'));
            document.getElementById('step'+s).classList.add('active');
            window.scrollTo(0,0);
        }

        async function submitData() {
            const btn = document.getElementById('submitBtn');
            btn.disabled = true;
            btn.innerText = "SINKRONIZACIJA...";

            const ustedaVal = parseInt(document.getElementById('usteda').value);
            let score = 40 + (ustedaVal * 0.3) + (odabraniAlati.length * 3.5);
            
            const data = {
                entitet: document.getElementById('entitet').value,
                opcina: document.getElementById('opcina').value,
                struka: document.getElementById('struka').options[document.getElementById('struka').selectedIndex].text,
                specificni_odgovori: Array.from(document.querySelectorAll('input[name="spec"]:checked')).map(x=>x.value).join(", "),
                alati: odabraniAlati.join(", "),
                ustedjeno_vrijeme: ustedaVal,
                uticaj_na_posao: document.querySelector('input[name="ocekivanje"]:checked').value,
                ai_iq_score: Math.min(score, 100).toFixed(1)
            };

            try {
                await fetch('https://ai-mapa-bih-1.onrender.com/submit-survey', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });
                document.getElementById('iq_score').innerText = data.ai_iq_score;
                document.getElementById('hvala_msg').innerText = `Procesirano za lokalitet ${data.opcina}`;
                nextStep(4);
            } catch (e) {
                alert("Mrežni prekid. Pokušajte ponovo.");
                btn.disabled = false;
                btn.innerText = "POKUŠAJ PONOVNO";
            }
        }
    </script>
</body>
</html>