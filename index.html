<!DOCTYPE html>
<html lang="bs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Monitor BiH - Nacionalno Istraživanje</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400&display=swap" rel="stylesheet">
    <style>
        body { background-color: #0b1120; color: #e2e8f0; font-family: 'Inter', sans-serif; font-weight: 200; }
        .step { display: none; }
        .step.active { display: block; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .glass { background: rgba(30, 41, 59, 0.3); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.05); }
        .option-card { border: 1px solid rgba(255,255,255,0.05); transition: 0.2s; cursor: pointer; }
        .selected { border-color: #3b82f6 !important; background: rgba(59, 130, 246, 0.1) !important; color: #60a5fa; }
        select { font-weight: 300 !important; cursor: pointer; }
        input[type="checkbox"] { display: none; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="max-w-4xl w-full glass p-8 md:p-14 rounded-[2.5rem] shadow-2xl">
        <header class="text-center mb-12">
            <h1 class="text-2xl font-light tracking-[0.4em] text-blue-400 uppercase">AI Monitor BiH</h1>
            <p class="text-[9px] text-slate-500 uppercase tracking-[0.3em] mt-4">Nacionalna platforma za digitalnu analitiku</p>
        </header>

        <form id="monitorForm">
            <div class="step active" id="step1">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div>
                        <label class="text-[9px] uppercase tracking-widest text-slate-500 mb-2 block">Regija / Entitet</label>
                        <select id="entitet" onchange="fillOpcine()" class="w-full bg-slate-900/60 border border-slate-800 p-4 rounded-xl outline-none focus:border-blue-500 text-xs">
                            <option value="">Odaberi...</option>
                            <option value="FBiH">Federacija BiH</option>
                            <option value="RS">Republika Srpska</option>
                            <option value="BD">Brčko Distrikt</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-[9px] uppercase tracking-widest text-slate-500 mb-2 block">Općina / Grad</label>
                        <select id="opcina" class="w-full bg-slate-900/60 border border-slate-800 p-4 rounded-xl outline-none text-xs">
                            <option value="">Prvo odaberi regiju...</option>
                        </select>
                    </div>
                </div>

                <div class="mb-10">
                    <label class="text-[9px] uppercase tracking-widest text-slate-500 mb-2 block">Sektor djelovanja</label>
                    <select id="sektor" onchange="pokaziPitanja()" class="w-full bg-slate-900/60 border border-slate-800 p-4 rounded-xl outline-none text-blue-300 text-xs">
                        <option value="">Odaberi sektor...</option>
                        <option value="akademska">Visoko obrazovanje / Akademska zajednica</option>
                        <option value="omladina">Osnovno i Srednje obrazovanje</option>
                        <option value="zdravstvo">Zdravstvo i Medicina</option>
                        <option value="javna_uprava">Javna uprava i Pravosuđe</option>
                        <option value="privreda">Privreda, Proizvodnja i Industrija</option>
                        <option value="trgovina">Trgovina, Marketing i Turizam</option>
                        <option value="it_sport">IT, Mediji i Sport</option>
                    </select>
                </div>
                <button type="button" onclick="next(2)" class="w-full bg-blue-600/60 hover:bg-blue-600 p-5 rounded-xl text-[10px] font-semibold uppercase tracking-[0.2em] transition-all">Nastavi na analizu</button>
            </div>

            <div class="step" id="step2">
                <h3 id="sektor_naslov" class="text-[11px] uppercase tracking-widest text-blue-400 mb-8 italic">Pitanja</h3>
                <div id="pitanja_container" class="grid grid-cols-1 gap-2 mb-10"></div>
                <button type="button" onclick="next(3)" class="w-full bg-blue-600/60 p-5 rounded-xl text-[10px] font-semibold uppercase tracking-[0.2em]">Sljedeći korak</button>
            </div>

            <div class="step" id="step3">
                <label class="text-[9px] uppercase tracking-widest text-slate-500 mb-6 block">Korišteni AI Alati</label>
                <div id="alati_grid" class="grid grid-cols-2 md:grid-cols-5 gap-2 mb-10"></div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12 text-xs">
                    <div>
                        <label class="text-[9px] uppercase tracking-widest text-slate-500 mb-4 block italic">Ušteda vremena kroz AI</label>
                        <input type="range" id="usteda" min="0" max="100" value="10" class="w-full h-1 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-blue-500">
                        <div class="text-center mt-3 text-blue-400 font-light"><span id="usteda_val">10</span>%</div>
                    </div>
                    <div>
                        <label class="text-[9px] uppercase tracking-widest text-slate-500 mb-4 block italic">Vaš stav prema AI</label>
                        <div class="flex gap-2">
                            <label class="flex-1 text-center p-3 border border-slate-800 rounded-xl cursor-pointer text-[9px] uppercase tracking-widest hover:border-blue-500 transition-colors">
                                <input type="radio" name="stav" value="Pozitivan" checked> Optimizam
                            </label>
                            <label class="flex-1 text-center p-3 border border-slate-800 rounded-xl cursor-pointer text-[9px] uppercase tracking-widest hover:border-blue-500 transition-colors">
                                <input type="radio" name="stav" value="Oprez"> Oprez
                            </label>
                        </div>
                    </div>
                </div>
                <button type="button" onclick="posalji()" id="submitBtn" class="w-full bg-emerald-600/60 hover:bg-emerald-600 p-6 rounded-2xl text-[10px] font-bold uppercase tracking-[0.3em] transition-all">Pošalji i izračunaj IDA</button>
            </div>

            <div class="step text-center" id="step4">
                <p class="text-[10px] uppercase tracking-[0.4em] text-slate-500 mb-6 italic">Indeks Digitalne Adaptacije (IDA)</p>
                <h1 id="score_val" class="text-9xl font-thin text-blue-400 mb-12">0</h1>
                <button type="button" onclick="location.reload()" class="text-slate-600 hover:text-white border-b border-slate-800 pb-1 text-[9px] uppercase tracking-[0.2em] transition-colors">Nova Analiza</button>
            </div>
        </form>
    </div>

    <script>
        // KOMPLETNA LISTA SVIH OPCINA U BIH
        const opcineBiH = {
            "FBiH": ["Banovići", "Bihać", "Bosanska Krupa", "Bosanski Petrovac", "Bosansko Grahovo", "Breza", "Bugojno", "Busovača", "Bužim", "Cazin", "Čapljina", "Čelić", "Čitluk", "Drvar", "Doboj Istok", "Doboj Jug", "Dobretići", "Domaljevac-Šamac", "Donji Vakuf", "Foča-Ustikolina", "Fojnica", "Glamoč", "Goražde", "Gornji Vakuf-Uskoplje", "Gračanica", "Gradačac", "Grude", "Hadžići", "Ilijaš", "Jablanica", "Jajce", "Kakanj", "Kalesija", "Kiseljak", "Kladanj", "Ključ", "Konjic", "Kupres", "Livno", "Ljubuški", "Lukavac", "Maglaj", "Mostar", "Neum", "Novi Travnik", "Odžak", "Olovo", "Orašje", "Pale-Prača", "Posušje", "Prozor-Rama", "Ravno", "Sanski Most", "Sapna", "Sarajevo-Centar", "Sarajevo-Novi Grad", "Sarajevo-Novo Sarajevo", "Sarajevo-Stari Grad", "Stolac", "Srebrenik", "Tešanj", "Tomislavgrad", "Travnik", "Trnovo", "Tuzla", "Usora", "Vareš", "Velika Kladuša", "Visoko", "Vitez", "Vogošća", "Zavidovići", "Zenica", "Žepče", "Živinice"],
            "RS": ["Banja Luka", "Berkovići", "Bijeljina", "Bileća", "Bratunac", "Brod", "Čajniče", "Čelinac", "Derventa", "Doboj", "Donji Žabar", "Foča", "Gacko", "Gradiška", "Han Pijesak", "Istočna Ilidža", "Istočni Drvar", "Istočni Mostar", "Istočni Stari Grad", "Istočno Novo Sarajevo", "Jezero", "Kalinovik", "Kneževo", "Kostajnica", "Kotor Varoš", "Kozarska Dubica", "Krupa na Uni", "Kupres", "Laktaši", "Lopare", "Ljubinje", "Milići", "Modriča", "Mrkonjić Grad", "Nevesinje", "Novi Grad", "Novo Goražde", "Osmaci", "Oštra Luka", "Pale", "Pelagićevo", "Petrovac", "Petrovo", "Prijedor", "Prnjavor", "Ribnik", "Rogatica", "Rudo", "Sokolac", "Srbac", "Srebrenica", "Stanari", "Šamac", "Šekovići", "Šipovo", "Teslić", "Trebinje", "Trnovo", "Ugljevik", "Višegrad", "Vlasenica", "Vukosavlje", "Zvornik"],
            "BD": ["Brčko Distrikt"]
        };

        const sektorskaPitanja = {
            "akademska": ["Analiza naučne literature i istraživanja", "Pisanje i struktuiranje akademskih radova", "Statistička obrada podataka i kodiranje", "Simulacija kompleksnih naučnih scenarija", "Personalizovano mentorstvo za studente"],
            "omladina": ["Pomoć pri rješavanju školskih zadaća", "Objašnjavanje lekcija i pojmova", "Priprema za maturu i prijemne ispite", "Učenje stranih jezika kroz konverzaciju", "Generisanje ideja za projekte i eseje"],
            "zdravstvo": ["Analiza medicinskih nalaza i snimaka", "Automatizacija izvještaja i dijagnoza", "Personalizacija terapije i lijekova", "Trijaža i praćenje stanja pacijenata", "Istraživanje novih medicinskih studija"],
            "javna_uprava": ["Automatizacija odgovora građanima", "Obrada i klasifikacija dokumenata", "Pretraga sudske prakse i zakona", "Kreiranje nacrta odluka i ugovora", "Analiza budžeta i javnih nabavki"],
            "privreda": ["Prediktivno održavanje mašina", "Kontrola kvaliteta (Computer Vision)", "Optimizacija potrošnje i logistike", "Dizajn proizvoda i prototipizacija", "Upravljanje lancem snabdijevanja"],
            "trgovina": ["Analiza navika kupaca i preporuke", "Dinamičko određivanje cijena", "Generisanje prodajnog i vizuelnog sadržaja", "Chatbot korisnička podrška 24/7", "Personalizovani turistički itinereri"],
            "it_sport": ["Generisanje i debugiranje koda", "Analiza sportske statistike i biometrije", "Automatizacija video montaže i dizajna", "Predviđanje sportskih povreda", "Lokalizacija i titlovanje sadržaja"]
        };

        const alati = ["ChatGPT", "Claude", "Gemini", "DeepSeek", "Midjourney", "Perplexity", "Copilot", "Canva", "Sora", "ElevenLabs"];

        function fillOpcine() {
            const e = document.getElementById('entitet').value;
            const o = document.getElementById('opcina');
            o.innerHTML = '<option value="">Odaberi općinu...</option>';
            if(e && opcineBiH[e]) opcineBiH[e].sort().forEach(x => o.innerHTML += `<option value="${x}">${x}</option>`);
        }

        function pokaziPitanja() {
            const s = document.getElementById('sektor').value;
            const c = document.getElementById('pitanja_container');
            const h = document.getElementById('sektor_naslov');
            c.innerHTML = '';
            if(s && sektorskaPitanja[s]) {
                h.innerText = document.getElementById('sektor').options[document.getElementById('sektor').selectedIndex].text;
                sektorskaPitanja[s].forEach(p => {
                    const div = document.createElement('div');
                    div.className = "option-card p-4 rounded-xl text-[9px] uppercase tracking-widest flex items-center bg-slate-900/40";
                    div.innerHTML = `<input type="checkbox" name="odgovor" value="${p}" onchange="toggleCard(this)"> <span class="ml-3">${p}</span>`;
                    div.onclick = () => div.querySelector('input').click();
                    c.appendChild(div);
                });
            }
        }

        function toggleCard(cb) { cb.parentElement.classList.toggle('selected', cb.checked); }

        function next(s) {
            document.querySelectorAll('.step').forEach(x => x.classList.remove('active'));
            document.getElementById('step' + s).classList.add('active');
            if(s === 3 && document.getElementById('alati_grid').innerHTML === '') {
                alati.forEach(a => {
                    const div = document.createElement('div');
                    div.className = "option-card p-3 rounded-lg text-[8px] text-center uppercase tracking-tighter bg-slate-900/40";
                    div.innerText = a;
                    div.onclick = function() { this.classList.toggle('selected'); };
                    document.getElementById('alati_grid').appendChild(div);
                });
            }
        }

        document.getElementById('usteda').oninput = function() { document.getElementById('usteda_val').innerText = this.value; }

        async function posalji() {
            const btn = document.getElementById('submitBtn');
            btn.disabled = true;
            btn.innerText = "SINKRONIZACIJA...";

            const selectedAlati = Array.from(document.querySelectorAll('#alati_grid .selected')).map(x => x.innerText);
            const selectedOdgovori = Array.from(document.querySelectorAll('input[name="odgovor"]:checked')).map(x => x.value);
            const usteda = parseInt(document.getElementById('usteda').value);
            
            let score = 30 + (selectedOdgovori.length * 7) + (selectedAlati.length * 3) + (usteda * 0.2);
            score = Math.min(score, 100).toFixed(1);

            const data = {
                entitet: document.getElementById('entitet').value,
                opcina: document.getElementById('opcina').value,
                sektor: document.getElementById('sektor').options[document.getElementById('sektor').selectedIndex].text,
                odgovori: selectedOdgovori.join(", "),
                alati: selectedAlati.join(", "),
                usteda: usteda,
                stav: document.querySelector('input[name="stav"]:checked').value,
                score: parseFloat(score)
            };

            try {
                await fetch('https://ai-mapa-bih-1.onrender.com/submit-survey', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });
                document.getElementById('score_val').innerText = score;
                next(4);
            } catch (e) {
                alert("Mrežna greška. Pokušajte ponovo.");
                btn.disabled = false;
                btn.innerText = "POKUŠAJ PONOVO";
            }
        }
    </script>
</body>
</html>