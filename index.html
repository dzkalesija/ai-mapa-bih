<!DOCTYPE html>
<html lang="bs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nacionalno istra쬴vanje o digitalnoj adaptaciji (AI) u BiH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        body { background-color: #0f172a; color: white; font-family: 'Inter', sans-serif; }
        .step { display: none; }
        .step.active { display: block; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .selected { border-color: #3b82f6 !important; background-color: rgba(59, 130, 246, 0.2); }
        input[type="radio"]:checked + span { color: #3b82f6; font-weight: bold; }
    </style>
</head>
<body class="p-4 md:p-10 flex flex-col min-h-screen">

    <div class="max-w-3xl mx-auto bg-slate-800/40 p-8 rounded-3xl border border-slate-700 shadow-2xl flex-grow">
        <div class="mb-10 border-b border-slate-700 pb-6 text-center">
            <h1 class="text-2xl font-extrabold text-blue-400 uppercase tracking-tighter">Istra쬴vanje Digitalne Adaptacije</h1>
            <p class="text-slate-400 text-sm mt-2">Analiza uticaja vje코ta캜ke inteligencije na tr쬴코te rada i obrazovanja u BiH</p>
        </div>

        <form id="aiSurvey">
            <div class="step active" id="step1">
                <h2 class="text-xl font-bold mb-6 flex items-center"><span class="bg-blue-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">1</span> Demografski profil</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-2 tracking-widest">Entitet / Distrikt</label>
                        <select id="entitet" onchange="azurirajOpcine()" class="w-full p-4 rounded-xl bg-slate-900 border border-slate-700 outline-none focus:ring-2 ring-blue-500">
                            <option value="">Odaberite...</option>
                            <option value="FBiH">Federacija BiH</option>
                            <option value="RS">Republika Srpska</option>
                            <option value="BD">Br캜ko Distrikt</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-2 tracking-widest">Op캖ina / Grad</label>
                        <select id="opcina" class="w-full p-4 rounded-xl bg-slate-900 border border-slate-700 outline-none focus:ring-2 ring-blue-500">
                            <option value="">Prvo odaberite entitet...</option>
                        </select>
                    </div>
                </div>
                
                <div class="mb-8">
                    <label class="block text-[10px] font-bold text-slate-500 uppercase mb-2 tracking-widest">Profesionalna kategorija</label>
                    <select id="struka" onchange="pokaziPut()" class="w-full p-4 rounded-xl bg-slate-900 border border-slate-700 outline-none focus:ring-2 ring-blue-500 font-semibold text-blue-400">
                        <option value="">Odaberite ulogu...</option>
                        <option value="ucenik_os">U캜enik (Osnovna 코kola)</option>
                        <option value="ucenik_ss">U캜enik (Srednja 코kola)</option>
                        <option value="student">Student</option>
                        <option value="proizvodnja">Industrija / Tehnika / Proizvodnja</option>
                        <option value="biznis">Menad쬸ent / Preduzetni코tvo / Administracija</option>
                        <option value="it_sektor">IT Sektor / Digitalni kreativci / Programiranje</option>
                        <option value="ostalo">Ostalo</option>
                    </select>
                </div>
                <button type="button" onclick="nextStep(2)" class="w-full bg-blue-600 hover:bg-blue-500 p-4 rounded-2xl font-bold uppercase tracking-widest transition-all">Nastavi na specifi캜ni dio</button>
            </div>

            <div class="step" id="step2">
                <div id="dinamicki_sadrzaj"></div>
                <button type="button" onclick="nextStep(3)" class="w-full mt-8 bg-blue-600 p-4 rounded-2xl font-bold uppercase tracking-widest">Analiza alata</button>
            </div>

            <div class="step" id="step3">
                <h2 class="text-xl font-bold mb-6 flex items-center"><span class="bg-blue-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">3</span> Parametri digitalne zrelosti</h2>
                
                <div class="mb-8">
                    <label class="block text-[10px] font-bold text-slate-500 uppercase mb-4 tracking-widest text-center">Frekvencija kori코tenja AI tehnologija</label>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                        <label class="p-4 bg-slate-900 border border-slate-700 rounded-2xl cursor-pointer text-center hover:border-blue-500 transition-all">
                            <input type="radio" name="frekvencija" value="Svakodnevno" checked class="hidden"> 
                            <span class="block text-sm font-semibold">Svakodnevno</span>
                            <span class="text-[9px] text-slate-500 uppercase">Visok intenzitet</span>
                        </label>
                        <label class="p-4 bg-slate-900 border border-slate-700 rounded-2xl cursor-pointer text-center hover:border-blue-500 transition-all">
                            <input type="radio" name="frekvencija" value="Sedmi캜no" class="hidden"> 
                            <span class="block text-sm font-semibold">Sedmi캜no</span>
                            <span class="text-[9px] text-slate-500 uppercase">Povremeno</span>
                        </label>
                        <label class="p-4 bg-slate-900 border border-slate-700 rounded-2xl cursor-pointer text-center hover:border-blue-500 transition-all">
                            <input type="radio" name="frekvencija" value="Mjese캜no" class="hidden"> 
                            <span class="block text-sm font-semibold">Rijetko</span>
                            <span class="text-[9px] text-slate-500 uppercase">Bazni nivo</span>
                        </label>
                    </div>
                </div>

                <div class="mb-8">
                    <label class="block text-[10px] font-bold text-slate-500 uppercase mb-2 tracking-widest text-center">Procijenjeni postotak optimizacije radnog procesa</label>
                    <select id="usteda_procent" class="w-full p-4 rounded-xl bg-slate-900 border border-slate-700 outline-none text-center text-blue-400 font-bold">
                        <option value="5">Do 5% (Minimalna pomo캖)</option>
                        <option value="15">5% - 20% (Zna캜ajna asistencija)</option>
                        <option value="35">20% - 50% (Visoka integracija)</option>
                        <option value="60">Preko 50% (Ekstremna automatizacija)</option>
                    </select>
                    <p class="text-[10px] text-slate-500 mt-2 text-center italic">Koliko bi Vam vremena vi코e trebalo za isti posao bez AI alata?</p>
                </div>

                <div class="mb-8">
                    <label class="block text-[10px] font-bold text-slate-500 uppercase mb-4 tracking-widest text-center">Specijalizovani alati koje koristite</label>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2" id="alati_grid"></div>
                </div>

                <label class="flex items-center justify-between p-4 bg-blue-900/10 border border-blue-500/30 rounded-2xl cursor-pointer mb-8">
                    <span class="text-xs font-bold uppercase tracking-wider">Investiram u pla캖ene (Pro) verzije</span>
                    <input type="checkbox" id="pretplata" class="w-6 h-6">
                </label>

                <button type="button" onclick="submitData()" class="w-full bg-emerald-600 hover:bg-emerald-500 p-5 rounded-2xl font-black uppercase tracking-[0.2em] transition-all shadow-lg">Finalizuj i po코alji podatke</button>
            </div>

            <div class="step text-center" id="step4">
                <div class="w-24 h-24 bg-blue-600/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-blue-500/30">
                    <span class="text-4xl">游늵</span>
                </div>
                <h1 class="text-3xl font-bold mb-2 uppercase">Indeks Adaptacije (IDA)</h1>
                <div class="text-7xl font-black text-blue-500 mb-8" id="iq_score">0</div>
                <div class="p-6 bg-slate-900/80 rounded-2xl border border-slate-700 text-left">
                    <p id="hvala_msg" class="text-sm leading-relaxed text-slate-300"></p>
                </div>
                <button type="button" onclick="location.reload()" class="mt-8 text-slate-500 text-xs hover:text-white uppercase tracking-widest">Novi unos podataka</button>
            </div>
        </form>
    </div>

    <footer class="mt-10 text-center text-[9px] text-slate-600 uppercase tracking-[0.4em] pb-10">
        <p>Glavni istra쬴va캜: <span class="text-slate-400 font-bold underline">VAE IME I PREZIME</span></p>
        <p class="mt-1 text-[8px]">Tehni캜ki razvoj: <span class="text-slate-500">GEMINI AI COLLABORATION 2024</span></p>
    </footer>

    <script>
        const podaciOpcine = {
            "FBiH": ["Banovi캖i", "Biha캖", "Bosanska Krupa", "Bosanski Petrovac", "Bosansko Grahovo", "Breza", "Bugojno", "Busova캜a", "Bu쬴m", "Cazin", "캛apljina", "캛eli캖", "캛itluk", "Drvar", "Doboj Istok", "Doboj Jug", "Dobreti캖i", "Domaljevac-마mac", "Donji Vakuf", "Fo캜a-Ustikolina", "Fojnica", "Glamo캜", "Gora쬯e", "Gornji Vakuf-Uskoplje", "Gra캜anica", "Grada캜ac", "Grude", "Had쬴캖i", "Ilija코", "Jablanica", "Jajce", "Kakanj", "Kalesija", "Kiseljak", "Kladanj", "Klju캜", "Konjic", "Kupres", "Livno", "Ljubu코ki", "Lukavac", "Maglaj", "Mostar", "Neum", "Novi Travnik", "Od쬬k", "Olovo", "Ora코je", "Pale-Pra캜a", "Posu코je", "Prozor-Rama", "Ravno", "Sanski Most", "Sapna", "Sarajevo-Centar", "Sarajevo-Novi Grad", "Sarajevo-Novo Sarajevo", "Sarajevo-Stari Grad", "Stolac", "Srebrenik", "Te코anj", "Tomislavgrad", "Travnik", "Trnovo", "Tuzla", "Usora", "Vare코", "Velika Kladu코a", "Visoko", "Vitez", "Vogo코캖a", "Zavidovi캖i", "Zenica", "콯ep캜e", "콯ivinice"],
            "RS": ["Banja Luka", "Berkovi캖i", "Bijeljina", "Bile캖a", "Bratunac", "Brod", "캛ajni캜e", "캛elinac", "Derventa", "Doboj", "Donji 콯abar", "Fo캜a", "Gacko", "Gradi코ka", "Han Pijesak", "Isto캜na Ilid쬬", "Isto캜ni Drvar", "Isto캜ni Mostar", "Isto캜ni Stari Grad", "Isto캜no Novo Sarajevo", "Jezero", "Kalinovik", "Kne쬰vo", "Kostajnica", "Kotor Varo코", "Kozarska Dubica", "Krupa na Uni", "Kupres", "Lakta코i", "Lopare", "Ljubinje", "Mili캖i", "Modri캜a", "Mrkonji캖 Grad", "Nevesinje", "Novi Grad", "Novo Gora쬯e", "Osmaci", "O코tra Luka", "Pale", "Pelagi캖evo", "Petrovac", "Petrovo", "Prijedor", "Prnjavor", "Ribnik", "Rogatica", "Rudo", "Sokolac", "Srbac", "Srebrenica", "Stanari", "마mac", "만kovi캖i", "말povo", "Tesli캖", "Trebinje", "Trnovo", "Ugljevik", "Vi코egrad", "Vlasenica", "Vukosavlje", "Zvornik"],
            "BD": ["Br캜ko Distrikt"]
        };

        function azurirajOpcine() {
            const entitet = document.getElementById('entitet').value;
            const select = document.getElementById('opcina');
            select.innerHTML = '<option value="">Odaberite...</option>';
            if(entitet && podaciOpcine[entitet]) {
                podaciOpcine[entitet].sort().forEach(o => select.innerHTML += `<option value="${o}">${o}</option>`);
            }
        }

        const alati = ["ChatGPT", "Claude AI", "Gemini", "DeepSeek", "Midjourney", "DALL-E", "GitHub Copilot", "Cursor", "Canva AI", "ElevenLabs", "Perplexity", "Sora/Runway"];
        let odabraniAlati = [];
        const alatiGrid = document.getElementById('alati_grid');

        alati.forEach(a => {
            const div = document.createElement('div');
            div.className = "p-2 bg-slate-900 border border-slate-700 rounded-xl text-[10px] text-center cursor-pointer hover:border-blue-500 transition-all font-bold uppercase tracking-tighter";
            div.innerText = a;
            div.onclick = function() {
                this.classList.toggle('selected');
                if(odabraniAlati.includes(a)) odabraniAlati = odabraniAlati.filter(i => i !== a);
                else odabraniAlati.push(a);
            };
            alatiGrid.appendChild(div);
        });

        function pokaziPut() {
            const struka = document.getElementById('struka').value;
            const kont = document.getElementById('dinamicki_sadrzaj');
            kont.innerHTML = '';
            let opcije = [];

            if(struka.includes('ucenik')) {
                opcije = ["Pomo캖 u u캜enju (Mat/Fiz)", "Pisanje eseja/radova", "U캜enje stranih jezika", "Programiranje", "Analiza lektire"];
            } else if(struka === 'proizvodnja') {
                opcije = ["Automatizacija ma코ina (PLC)", "Senzorsko odr쬬vanje", "Optimizacija resursa", "Kontrola kvaliteta", "Logistika"];
            } else if(struka === 'biznis') {
                opcije = ["Analiza finansijskih podataka", "Marketin코ke kampanje", "Email administracija", "Planiranje strategije", "Izrada prezentacija"];
            } else if(struka === 'it_sektor') {
                opcije = ["Generisanje koda (Coding)", "Debugiranje sistema", "UI/UX dizajn", "Dokumentacija", "Arhitektura sistema"];
            }

            if(opcije.length > 0) {
                kont.innerHTML = `<h2 class="text-xl font-bold mb-6 flex items-center"><span class="bg-blue-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">2</span> Specifi캜na primjena</h2>`;
                opcije.forEach(o => {
                    kont.innerHTML += `<label class="block p-4 bg-slate-900 border border-slate-700 rounded-2xl mb-3 cursor-pointer hover:bg-slate-800 transition-all text-sm font-medium"><input type="checkbox" name="spec" value="${o}" class="mr-3"> ${o}</label>`;
                });
            }
        }

        function nextStep(s) {
            document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
            document.getElementById('step' + s).classList.add('active');
        }

        async function submitData() {
            const frekvencija = document.querySelector('input[name="frekvencija"]:checked').value;
            const procenatUstede = parseInt(document.getElementById('usteda_procent').value);
            const pretplata = document.getElementById('pretplata').checked;
            
            // IDA ALGORITAM (Indeks Digitalne Adaptacije)
            let ida = procenatUstede; 
            if(frekvencija === "Svakodnevno") ida += 30;
            if(frekvencija === "Sedmi캜no") ida += 15;
            if(pretplata) ida += 10;
            ida += (odabraniAlati.length * 2);
            if(ida > 100) ida = 100;

            const data = {
                entitet: document.getElementById('entitet').value,
                opcina: document.getElementById('opcina').value,
                struka: document.getElementById('struka').options[document.getElementById('struka').selectedIndex].text,
                specificni_odgovori: Array.from(document.querySelectorAll('input[name="spec"]:checked')).map(e => e.value).join(', '),
                alati: odabraniAlati.join(', '),
                ustedjeno_vrijeme: procenatUstede,
                placa_pretplatu: pretplata,
                uticaj_na_posao: frekvencija,
                ai_iq_score: ida
            };

            try {
                const res = await fetch('https://ai-mapa-bih-1.onrender.com/submit-survey', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });
                if(res.ok) {
                    document.getElementById('iq_score').innerText = ida.toFixed(0);
                    document.getElementById('hvala_msg').innerText = `Uspje코no ste doprinijeli mapi digitalne adaptacije za op캖inu ${data.opcina}. Va코 IDA koeficijent ukazuje na stepen integracije AI alata u Va코em profesionalnom okru쬰nju.`;
                    nextStep(4);
                }
            } catch (e) { alert("Slanje nije uspjelo. Provjerite internet vezu."); }
        }
    </script>
</body>
</html>